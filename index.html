<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>🦁 SkorChat</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-purple-800 h-screen flex flex-col">
  <div id="chat" class="flex-1 overflow-y-auto p-4 space-y-2 text-white"></div>

  <div class="p-4 flex">
    <input id="msg" type="text" placeholder="הקלד כאן..." 
           class="flex-1 p-2 rounded-l-lg focus:outline-none text-black">
    <button onclick="sendMsg()" 
            class="bg-yellow-500 px-4 rounded-r-lg">שלח</button>
  </div>

  <script>
    const chat = document.getElementById("chat");
    const msgInput = document.getElementById("msg");

    async function sendMsg() {
      const text = msgInput.value.trim();
      if (!text) return;

      addMessage("אתה", text);
      msgInput.value = "";

      try {
        const res = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": "Bearer sk-XXXX" // <<< שים כאן את המפתח שלך
          },
          body: JSON.stringify({
            model: "gpt-4o-mini",
            messages: [{ role: "user", content: text }]
          })
        });

        const data = await res.json();
        if (data.choices && data.choices.length > 0) {
          const reply = data.choices[0].message.content;
          addMessage("SkorChat 🦁", reply);
        } else {
          addMessage("SkorChat 🦁", "⚠️ לא התקבלה תשובה מהמודל.");
        }
      } catch (err) {
        console.error(err);
        addMessage("SkorChat 🦁", "❌ שגיאת חיבור ל־API.");
      }
    }

    function addMessage(sender, text) {
      const div = document.createElement("div");
      div.className = "p-2 bg-purple-700 rounded-lg";
      div.innerHTML = `<b>${sender}:</b> ${text}`;
      chat.appendChild(div);
      chat.scrollTop = chat.scrollHeight;
    }
  </script>
</body>
</html>
